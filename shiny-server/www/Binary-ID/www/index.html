<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script type="application/shiny-singletons"></script>
  <script type="application/html-dependencies">json2[2014.02.04];jquery[1.11.0];shiny[0.12.2];jqueryui[1.10.4];showdown[0.3.1];highlight.js[6.2];ionrangeslider[2.0.12];strftime[0.9.2];bootstrap[3.3.1];font-awesome[4.2.0]</script>
<script src="shared/json2-min.js"></script>
<script src="shared/jquery.min.js"></script>
<link href="shared/shiny.css" rel="stylesheet" />
<script src="shared/shiny.min.js"></script>
<script src="shared/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script src="shared/showdown/compressed/showdown.js"></script>
<script src="shared/highlight/highlight.pack.js"></script>
<link href="shared/ionrangeslider/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="shared/ionrangeslider/css/ion.rangeSlider.skinShiny.css" rel="stylesheet" />
<script src="shared/ionrangeslider/js/ion.rangeSlider.min.js"></script>
<script src="shared/strftime/strftime-min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="shared/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<script src="shared/bootstrap/js/bootstrap.min.js"></script>
<script src="shared/bootstrap/shim/html5shiv.min.js"></script>
<script src="shared/bootstrap/shim/respond.min.js"></script>
<link href="shared/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
  <script src="shared/shiny-showcase.js"></script>
  <link rel="stylesheet" type="text/css" href="shared/highlight/rstudio.css"/>
  <link rel="stylesheet" type="text/css" href="shared/shiny-showcase.css"/>
  <title>Microbe-ID: Binary-ID (Binary (AFLP) genotype identification)</title>
</head>

<body>
  <div class="panel-group span12" id="accordion">
    <!-- MICROBE-ID customization: Modify extendable content -->
    <p>Click on the following links to extend the contents of the webpage:</p>
    <div class="panel panel-default">
      <h4>
        <!-- MICROBE-ID customization: nav-pills that contain the hyperlinks to the contents of the page -->
        <ul class="nav nav-pills">
          <li>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
              <em>Instructions</em>
            </a>
          </li>
          <li>
            <a data-toggle="collapse" data-parent="#accordion" href="#input">
              <em>Data Input</em>
            </a>
          </li>
        </ul>
      </h4>
      <div id="collapseOne" class="panel-collapse collapse">
        <div class="panel-body">
          <h4>Instructions</h4>
          <!-- MICROBE-ID customization: In the first <a href = > tag you will find the hyperlink to the'./AFLP_Aphanomyces.xlsx' file. This file contains the template query to use in Binary-ID. CHANGE IT FOR YOUR OWN EXAMPLE QUERIES -->
          <p>Copy and paste your matrix using <a href="./AFLP_Aphanomyces.xlsx" target="_blank">this file</a> as template. <b>Do not include the header</b></p>
          <p style="color:blue"><b>Warning:</b> Datatypes are of ONLY binary type (1 and 0)></p>
          <hr>
        </div>
      </div>
      <!-- MICROBE-ID customization: Shiny input begins here -->
      <div class="control collapse in span12" id="input">
        <form class="well">
          <form class="text">
            <label style="align:center">Text Input</label>
            <!--  MICROBE-ID customization: From this line on, every one of the functions is going to be used by shiny in a reactive way. All modifications         of processes and inputs for the shiny script file (../shiny.R) are found here. To determine which variable communicates with which <div> in the index.html file, search in the server.R filefor the line with the class=shiny*. (e.g. The input$table variable is gonna be filled with info from the <div class="shiny-bound-input" id="table">. For more information refer to the shiny manual -->
            <textarea id="table" name="table" class="shiny-bound-input" cols="25" rows="7" style="width: 100%"></textarea>
            <br>
          </form>
          <form class="text">
            <p>
              <!-- MICROBE-ID customization: In this <div> you can find the differerent genetic distances to be used. Note how all the <option value = > tags have a smaller          name. These names communicate with the server.R file of Binary-ID to modify the distance used (lines 29-36). Be careful if you are changing these lines and modify the correspondent server.R file-->
              <div class="control-group span3">
                <label class="control-label" for="distance">Choose a genetic distance:</label>
                <select id="distance" style="width:300px">
                  <option value="nei" selected="selected">Nei's distance</option>
                  <option value="edwards">Edwards' distance</option>
                  <option value="rogers">Rogers' or Classic Eucledian distance </option>
                  <option value="reynolds">Reynolds' distance</option>
                  <option value="provesti">Absolute/Provesti's distance</option>
                </select>
              </div>
              <label>Random Seed (This will affect bootstrap values and the layout of the minimum spanning network.)</label>
              <!-- MICROBE-ID customization: Change the default value of your seed depending on how you want the  minimum spanning network to appear initially. -->
              <input type="number" name="seed" id="seed" value="9449" min="0" />
            </p>
            <button type="submit" class="btn btn-success collapse in" data-toggle="collapse" data-target="#input">Submit genotype</button>
          </form>
      </div>
    </div>
  </div>
  <!-- MICROBE-ID customization: In this <div id="plot"> division is where shiny will print the output for the app. Follow the code to find each division-->
  <div id="plot" class="shiny-plot-output shiny-bound-output" style="width: 100% ; height: 900px">
    <div class="span9 offset1">
      <h4>Analysis</h4>
      <p>Select between a distance tree with bootstrap support values or a minimum spanning network</p>
      <!-- MICROBE-ID customization: In this <div class = "tabbable"> we created two different tabs: Distance trees and minimum spanning networks. Be sure that the <a href= #value> correspond to the precise tab in the <div class="tab-content">-->
      <div class="tabbable">
        <ul class="nav nav-tabs">
          <li class="active">
            <a href="#tab-8923-1" data-toggle="tab">Distance Tree with Bootstrap</a>
          </li>
          <li>
            <a href="#tab-8923-2" data-toggle="tab">Minimum Spanning Network</a>
          </li>
        </ul>
        <!-- MICROBE-ID customization: Distance tree block begins -->
        <div class="tab-content">
          <div class="tab-pane active" title="Bootstrap Tree" id="tab-8923-1">
            <h2>Tree Parameters</h2>
            <form id="form" class="well">
              <div class="row-fluid">
                <div class="control-group span3">
                  <label class="control-label" for="tree">Choose a tree algorithm:</label>
                  <!-- MICROBE-ID customization: Here you create the extendable list to choose between NJ or UPGMA trees. This region of the code communicates with line 43 of the server.R-->
                  <select id="tree" style="width:100px">
                    <option value="nj">nj</option>
                    <option value="upgma" selected="selected">UPGMA</option>
                  </select>
                </div>
                <!-- MICROBE-ID customization: Here you define the number of bootstrap replicates to be run on the server.R. This region communcates with line 135 of the server.R (input$boot) -->
                <div class="control-group span6">
                  <label class="control-label">Number of bootstrap replicates</label>
                  <div class="controls">
                    <input id="boot" name="boot" type="number" value="100" min="10" max="1000" style="width:100px">
                  </div>
                </div>
                <br>
              </div>
              <div class="row-fluid">
                <div class="control-group span3">
                  <!-- MICROBE-ID customization: Here is the submit button. It will send a signal
            to run the queries with the parameters specified.-->
                  <button type="submit" class="btn btn-success" data-loading-text="Calculating...">Create Tree</button>
                </div>
                <!-- MICROBE-ID customization: Links to download the results. These lines communicate with the region defined from line 173 in server.R -->
                <div class="span9">
                  <a id="downloadData" class="btn btn-primary shiny-download-link" href="" target="_blank">Newick File</a>
                  <a id="downloadPdf" class="btn btn-info shiny-download-link" href="" target="_blank">PDF</a>
                </div>
              </div>
              <br>
              <span class="help-block" style="color:green">Please wait while the tree is generated</span>

            </form>
            <!/div>
            <div data-display-if="$('html').hasClass('shiny-busy')">
              <div class="span9 offset1">
                <br>
                <h4>Processing, please wait.</h4>
                <div class="progress progress-striped active">
                  <div class="bar" style="width: 100%;"></div>
                </div>
              </div>
            </div>
            <div id="distPlotTree" class="span6 shiny-plot-output" style="width: 100% ; height: 800px"></div>
          </div>
          <!-- MICROBE-ID customization: Minimum spanning network block begins -->
          <div class="tab-pane" title="Minimum spanning network" id="tab-8923-2">
            <div class="span12 well">
              <h3>Minimum Spanning Network</h3>
              <form id="form">
                <span class="help-block">Note: Distances are calculated using the model selected before.</span>
                <div class="span3">
                  <!-- MICROBE-ID customization: Slider to control levels of grayness for the edges in the Minimum spanning networks. This line communicates with line 127 of server.R-->
                  <label class="control-label" for="integer">Use the slider to adjust the grey scale of the edge distances.</label>
                  <input class="js-range-slider" id="integer" value=3 data-min="0" data-max="50" data-from="500" data-step="1" data-grid="true" data-grid-num="10" data-grid-snap="false" data-prettify-separator="," data-keyboard="true" data-keyboard-step="0.1" data-drag-interval="true" data-data-type="number"/>
                  <!-- input id="integer" type="slider" name="integer" value="3" class="jslider" data-from="0" data-to="50" data-step="1" data-skin="plastic" data-round="FALSE" data-locale="us" data-format="#,##0.#####" data-smooth="FALSE" --/>
                </div>
                <div class="span12">
                  <!-- MICROBE-ID customization: Here is the submit button. It will send a signal to run the queries with the parameters specified.-->
                  <button type="submit" class="btn btn-success" data-loading-text="Calculating...">Calculate MST</button>
                  <!-- MICROBE-ID customization: Links to download the results. These lines communicate with the region defined from line 199 in server.R -->
                  <a id="downloadPdfMst" class="btn btn-info shiny-download-link" href="" target="_blank">PDF</a>
                </div>
              </form>
            </div>
            <!-- MICROBE-ID customization: This <div id="MinSpanTree"> outputs the results of the minimum spanning network. Note that the div id is the same than the
        variable output$MinSpanTree in line 182 of the server.R. READ THE SHINY DOCUMENTATION IN INPUTS/OUTPUTS TO UNDERSTAND HOW REACTIVE OUTPUTS WORK (http://shiny.rstudio.com/tutorial/lesson4/)-->
            <div id="MinSpanTree" class="shiny-plot-output" style="width: 100% ; height: 800px"></div>
          </div>
        </div>
      </div>
      </div-->
    </div>
  </div>
</body>
</html>
